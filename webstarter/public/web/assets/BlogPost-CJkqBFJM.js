import{r as a,M as P,$ as x,j as e,H as E,I as C,L as f,B as N}from"./index-BEnNszjz.js";import{Spinner as T}from"./spinner-DY27AOAl.js";import{A as k}from"./arrow-right-CsyS5JiY.js";import"./loader-circle-BB9DMWwo.js";const M=()=>{const[b,v]=a.useState(""),[l,h]=a.useState([]),[y,w]=a.useState(!1),[d,g]=a.useState(1),[r]=a.useState(6),{data:i={},error:j}=P("Blog Settings","Blog Settings"),{data:t=[],error:u,isLoading:_}=x("Blog Post",{fields:["name","title","meta_title","meta_description","blog_category","meta_image","published_on","read_time"],filters:[["published","=",1]],limit_start:(d-1)*r,limit:r}),{data:o=[],error:p}=x("Blog Category",{fields:["name","title"]}),{data:m}=x("Blog Post",{fields:["title","route"],filters:[["published","=",1]],limit:5,order_by:"published_on desc"});a.useEffect(()=>{t&&l!==t&&h(t)},[t,l]);const S=s=>{const n=s.target.value.toLowerCase();v(n);const c=t==null?void 0:t.filter(B=>B.title.toLowerCase().includes(n));h(c||[]),w(!!(c!=null&&c.length))};return j?e.jsx("div",{children:e.jsxs("p",{className:"text-center text-red-500",children:["Error loading blog settings: ",j.message]})}):u?e.jsx("div",{children:e.jsxs("p",{className:"text-center text-red-500",children:["Error loading blog posts: ",u.message]})}):_?e.jsxs("div",{className:"items-center py-40",children:[" ",e.jsx(T,{size:"large"})]}):!t||!i?e.jsx("div",{children:e.jsx("p",{className:"text-center text-gray-500",children:"Blog data or settings not found."})}):p?e.jsx("div",{children:e.jsxs("p",{className:"text-center text-red-500",children:["Error loading blog settings: ",p.message]})}):e.jsxs("section",{children:[e.jsxs(E,{children:[e.jsx("title",{children:"Blog - Alool Technologies"}),e.jsx("meta",{name:"description",content:"Read the latest blogs and updates from Alool Technologies."})]}),e.jsxs("div",{className:"relative h-64",children:[i.preview_image&&e.jsx("img",{src:i.preview_image,alt:"Blog Header Image",className:"absolute inset-0 w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black opacity-70"}),e.jsxs("div",{className:"relative z-10 text-center py-16 text-white",children:[e.jsx("h1",{className:"text-4xl font-bold",children:i.blog_title||"Blog"}),e.jsx("p",{className:"mt-2",children:i.blog_introduction||""})]})]}),e.jsxs("div",{className:"container mx-auto px-4 py-10 grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("aside",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Search"}),e.jsx(C,{type:"search",placeholder:"Search blog",value:b,onChange:S,className:"mt-2"}),y&&l.length>0&&e.jsx("ul",{className:"bg-white shadow-lg mt-2 p-4",children:l.map(s=>e.jsx("li",{className:"cursor-pointer hover:bg-gray-100 p-2",children:e.jsx(f,{to:`/blog/${s.name}`,children:s.title})},s.name))})]}),e.jsxs("div",{className:"mb-8 border rounded-lg ",children:[e.jsx("h2",{className:"text-lg font-semibold ml-2",children:"Categories"}),e.jsxs("ul",{className:"my-2 ml-2 space-y-2",children:[e.jsxs("li",{children:["All (",t==null?void 0:t.length,")"]}),o==null?void 0:o.map(s=>e.jsxs("li",{children:[s.title," (",t==null?void 0:t.length,")"]},s.name))]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Tags"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx("span",{className:"px-3 py-1 bg-gray-200 rounded-full text-sm",children:"Design"}),e.jsx("span",{className:"px-3 py-1 bg-gray-200 rounded-full text-sm",children:"Technology"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Recent Blogs"}),e.jsx("ul",{className:"space-y-2",children:m==null?void 0:m.map((s,n)=>e.jsx("li",{children:e.jsx("a",{href:s.route,className:"text-primary hover:underline",children:s.title})},n))})]})]}),e.jsxs("main",{className:"lg:col-span-3 mt-10",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:l.slice(0,r).map(s=>e.jsxs("article",{className:"overflow-hidden rounded-lg shadow transition hover:shadow-lg",children:[s.meta_image&&e.jsx("img",{alt:s.title,src:s.meta_image,className:"h-56 w-full object-cover"}),e.jsxs("div",{className:"bg-white p-4 sm:p-6",children:[e.jsx("time",{dateTime:s.published_on,className:"block text-xs text-gray-500",children:new Date(s.published_on).toLocaleDateString()}),e.jsx("h3",{className:"mt-0.5 text-lg font-semibold text-gray-900",children:s.title}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 line-clamp-3",children:s.meta_description}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Read time: ",s.read_time?`${s.read_time} minutes`:"Unknown"]}),e.jsxs(f,{to:`/web/blog/${s.name}`,className:"mt-auto text-primary font-medium hover:underline flex items-center justify-start",children:["Read More",e.jsx(k,{className:"ml-2 w-4 h-4"})]})]})]},s.name))}),e.jsxs("div",{className:"flex justify-center mt-8",children:[e.jsx(N,{onClick:()=>g(s=>Math.max(s-1,1)),disabled:d===1,children:"Previous"}),e.jsxs("span",{className:"mx-4",children:["Page ",d]}),e.jsx(N,{onClick:()=>g(s=>s+1),disabled:l.length<r,children:"Next"})]})]})]})]})};export{M as BlogPost,M as default};
