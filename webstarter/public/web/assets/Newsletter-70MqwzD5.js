var h=(i,n,a)=>new Promise((c,l)=>{var t=s=>{try{o(a.next(s))}catch(r){l(r)}},d=s=>{try{o(a.throw(s))}catch(r){l(r)}},o=s=>s.done?c(s.value):Promise.resolve(s.value).then(t,d);o((a=a.apply(i,n)).next())});import{r as x,W as w,$ as y,j as e,I as D,B as b,D as N,c as E,d as G,e as S,g as v,h as C}from"./index-BEnNszjz.js";const k=({title:i,subtitle:n,email_group:a="Newsletter Group"})=>{const[c,l]=x.useState(""),[t,d]=x.useState(a),[o,s]=x.useState(!1),{createDoc:r,isSubmitting:p}=w(),{data:m,error:I}=y("Email Group",{}),f=u=>h(void 0,null,function*(){u.preventDefault();try{(m==null?void 0:m.find(j=>j.name===t))||(yield r("Email Group",{title:t,email_group_name:t})),yield r("Email Group Member",{email_group:t,email:c}),l(""),s(!0)}catch(g){console.error("Subscription error: ",g),alert("Failed to subscribe, please try again.")}});return e.jsxs("section",{className:"mx-auto w-full max-w-7xl px-5 py-16 md:px-10 md:py-20",children:[e.jsxs("div",{className:"bg-gray-100 p-8 text-center sm:p-10 md:p-16 rounded-lg shadow-lg",children:[i&&e.jsx("h2",{className:"mb-4 text-3xl font-bold md:text-5xl",children:i}),n&&e.jsx("p",{className:"mx-auto mb-6 max-w-2xl text-sm md:mb-10 lg:mb-12",children:n}),e.jsx("div",{className:"mx-auto mb-4 flex max-w-lg justify-center",children:e.jsxs("form",{onSubmit:f,className:"flex w-full flex-col gap-3 sm:flex-row",children:[e.jsx(D,{type:"email",value:c,onChange:u=>l(u.target.value),placeholder:"Enter your email",required:!0}),e.jsx(b,{type:"submit",disabled:p,children:p?"Subscribing...":"Notify me"})]})})]}),e.jsx(N,{open:o,onOpenChange:s,children:e.jsxs(E,{className:"text-center",children:[e.jsxs(G,{children:[e.jsx(S,{children:"Thank You!"}),e.jsx(v,{children:"You have successfully subscribed to our newsletter."})]}),e.jsx(C,{children:e.jsx(b,{onClick:()=>s(!1),children:"Close"})})]})})]})};export{k as default};
