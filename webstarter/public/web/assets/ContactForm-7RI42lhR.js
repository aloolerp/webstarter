var F=Object.defineProperty,M=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var v=(a,s,t)=>s in a?F(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,C=(a,s)=>{for(var t in s||(s={}))Y.call(s,t)&&v(a,t,s[t]);if(f)for(var t of f(s))H.call(s,t)&&v(a,t,s[t]);return a},y=(a,s)=>M(a,I(s));var D=(a,s,t)=>new Promise((g,d)=>{var u=l=>{try{n(t.next(l))}catch(i){d(i)}},o=l=>{try{n(t.throw(l))}catch(i){d(i)}},n=l=>l.done?g(l.value):Promise.resolve(l.value).then(u,o);n((t=t.apply(a,s)).next())});import{r as m,y as T,W as q,M as P,u as R,j as e,b as p,I as S,B as b,D as U,c as W,d as k,e as B,g as L,h as O}from"./index-BEnNszjz.js";import{Textarea as A}from"./textarea-BcY_xYkP.js";import{Card as G,CardHeader as $,CardContent as z}from"./card-C2UN-ddF.js";const X=()=>{const[a,s]=m.useState({full_name:"",email:"",message:""}),{call:t}=m.useContext(T),{createDoc:g}=q(),[d,u]=m.useState(!1),[o,n]=m.useState(""),[l,i]=m.useState(!1),{data:h,error:N}=P("Contact Us Settings","Contact Us Settings"),w=R(),j=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),x=(r,c)=>{s(E=>y(C({},E),{[r]:c})),r==="email"&&n(j(c)?"":"Please enter a valid email address")},_=r=>D(void 0,null,function*(){if(r.preventDefault(),!j(a.email)){n("Please enter a valid email address");return}try{i(!0),yield t.post("frappe.www.contact.send_message",{sender:a.email,message:a.message}),yield g("Contact Form",{full_name:a.full_name,email:a.email,message:a.message}),s({full_name:"",email:"",message:""}),u(!0)}catch(c){console.error("Error submitting contact form:",c),alert("An error occurred. Please try again later.")}finally{i(!1)}});return N?e.jsx("div",{children:"Error loading Contact Us Settings"}):e.jsxs(e.Fragment,{children:[e.jsxs(G,{className:"max-w-lg mx-auto shadow-lg rounded-lg",children:[e.jsx($,{children:h&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-xl font-bold",children:h.heading}),e.jsx("div",{dangerouslySetInnerHTML:{__html:h.introduction},className:"prose"})]})}),e.jsx(z,{children:e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Full Name"}),e.jsx(S,{value:a.full_name,onChange:r=>x("full_name",r.target.value),placeholder:"Your full name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Email"}),e.jsx(S,{value:a.email,onChange:r=>x("email",r.target.value),placeholder:"Your email",type:"email",required:!0}),o&&e.jsx("p",{className:"text-red-600",children:o})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Message"}),e.jsx(A,{value:a.message,onChange:r=>x("message",r.target.value),placeholder:"Your message",required:!0})]}),e.jsx(b,{type:"submit",disabled:l||!!o,className:"w-full",children:l?"Sending...":"Submit"})]})})]}),e.jsx(U,{open:d,onOpenChange:u,children:e.jsxs(W,{className:"text-center",children:[e.jsxs(k,{children:[e.jsx(B,{children:"Thank You!"}),e.jsx(L,{children:"Your message has been successfully sent. We will respond as soon as possible."})]}),e.jsx(O,{children:e.jsx(b,{variant:"primary",onClick:()=>w("/"),children:"Go to Home"})})]})})]})};export{X as default};
